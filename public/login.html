<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />

    <title>Đăng nhập</title>
    <link rel="stylesheet" href="./css/layui.css" />
    <link rel="stylesheet" href="./css/style.css" />
  </head>
  <body>
    <div class="login-main">
      <header class="layui-elip">Đăng nhập</header>
      <form class="layui-form">
        <div class="layui-input-inline">
          <input
            type="text"
            name="account"
            required
            lay-verify="required"
            placeholder="Tên tài khoản"
            autocomplete="off"
            class="layui-input"
          />
        </div>
        <div class="layui-input-inline">
          <input
            type="password"
            name="password"
            required
            lay-verify="required"
            placeholder="Mật khẩu"
            autocomplete="off"
            class="layui-input"
          />
        </div>
        <div class="layui-input-inline login-btn">
          <button lay-submit lay-filter="login" class="layui-btn">Đăng nhập</button>
        </div>
        <hr />
        <p>
          <a href="register.html" class="fl">Đăng ký ngay</a
          ><a href="javascript:;" class="fr">Quên mật khẩu?</a>
        </p>
      </form>
    </div>

    <script src="./layui.js"></script>
    <script type="text/javascript">
      layui.use(['form', 'layer', 'jquery'], function () {
        var form = layui.form;
        var $ = layui.jquery;
        form.on('submit(login)', function (data) {
          var userData = JSON.stringify(data.field);
          $.ajax({
            url: '/login',
            data: 'data=' + userData,
            dataType: 'json',
            type: 'post',
            success: function (data) {
              console.log(data);
              if (data != 0) {
                location.href = '/public/' + data;
              } else {
                layer.msg('Tên tài khoảng hoặc mật khẩu không đúng');
              }
            },
          });
          return false;
        });
      });
    </script>
  </body>
</html>
